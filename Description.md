# Read Study Platform

이 플랫폼은 생성된 CT 영상에 대한 유효성을 검증하기 위한 리드 스터디용 플랫폼입니다.

# 사용 기술

-   Conda // 환경 구성
-   Python
-   Gradio(또는 Streamlit)
-   FastAPI
-   Sqlite3
-   Etc

# 환경 관련

-   실행 환경을 구성하기 위해 Conda를 사용할 것
-   실행 환경을 재구축하기 위한 requirements.txt나 conda.yaml을 구성할 것

# 요구사항(API)

1. 여러 의료진이 해당 플랫폼에 접속하여 익명화된(환자의 메타데이터가 제거된) CT 영상을 확인할 수 있습니다.

-   CT 영상은 한 환자의 Dicom 파일에서 Pixel Array만 추출하여 z, y, x로 구성된 3D 볼륨의 Numpy 파일로 구성되어 있습니다.
-   Numpy 파일의 픽셀 값은 HU 값으로 구성되어 있습니다.
-   CT 영상을 확인할 때, HU값에 대한 윈도우 조절(윈도우 레벨 및 너비)를 조절하여 볼 수 있도록 구성합니다.

2. 여러 의료진이 본 플랫폼에서 CT 영상을 확인한 후, CECT(실제)/sCECT(생성) 영상인지 분석 결과를 제출할 수 있는 기능을 제공합니다.

-   여러 의료진이 본 플랫폼에 접속하기 때문에 페이지 접속 초기 검사자의 소속 및 성함을 입력받도록 합니다.
-   분석 결과는 Sqlite3로 관리하여 동일 검사자 접속 시, 이전 분석 결과를 조회, 수정할 수 있는 기능을 제공합니다.

3. 비인가자에 대한 접속 차단 기능을 제공합니다.

-   본 플랫폼 접속 시, 소속과 성함을 입력받으며, 사전 정의된 비밀번호를 입력받아 접속자가 인가자인지 비인가자인지 검증합니다.
-   사전 정의된 비밀번호는 .env 파일에 기록하여 사용합니다.
-   UI에서 평문으로 전송한 비밀번호는 암호화(SHA-256 등)를 통해 전송되며 검증됩니다.

# 화면 구성

1. 접속 화면

-   화면 중앙에 검사자의 소속 및 성함을 입력할 수 있는 입력창을 배치합니다.
-   비인가자에 대한 보안을 위해 사전 정의된 비밀번호를 입력할 수 있는 입력창을 배치합니다.
-   다음 화면으로 넘어갈 수 있는 '접속' 버튼을 배치합니다.

2. 뷰어 화면

-   환자 목록 표시부: 좌측 사이드바

    -   좌측 사이드바에 익명화된 이름으로 표시되는(Numpy 파일의 파일이름) 환자 목록을 배치합니다.
    -   환자 목록에서 환자 ID 클릭 시, 해당 환자의 CT 영상을 불러옵니다.
    -   데이터 로딩 시, 지연이 발생하면 이를 팝업 또는 모달 형태로 로딩중을 시각화하여 표시합니다.
    -   이미 분석 결과를 제출한 환자와 제출하지 않은 환자를 확인할 수 있는 상태 뱃지를 함께 표시합니다.

-   시각화 표시부: 우측 화면 전체
    -   아직 선택된 환자가 없다면 좌측 사이드바에서 환자를 선택하라는 안내문을 표시합니다.
    -   선택된 환자가 있다면 해당 환자의 CT 영상을 시각화합니다.
    -   시각화 표시부를 3줄로 구성하여 첫번째 줄에 분석 결과를 제출할 수 있는 결과 제출부를, 두번째 줄에는 영상 표시부를 상단에 배치하고, 세번째 줄에는 슬라이스 및 윈도우(레벨 및 너비)를 조절할 수 있는 조작부를 하단에 배치합니다.
    -   결과 제출부에는 라디오 버튼을 구성하여 CECT, sCECT를 선택할 수 있는 버튼 그룹을 배치합니다.
    -   이미 해당 환자에 대해 결과를 제출한 기록이 있다면, 해당 값을 활용하여 라디오 버튼의 상태를 수정하고, 최종 제출 일/시를 표시합니다.
    -   조작부는 2줄로 구성하여 첫번째 줄에는 CT 영상의 슬라이스를 조절할 수 있는 슬라이더와 현재 슬라이스 번호를 표시 및 조절할 수 있는 숫자 입력창을 제공합니다.
    -   조작부의 두번째 줄은 좌측, 우측으로 구분하여 각각 윈도우 레벨과 너비를 조절할 수 있는 슬라이더와 현재 값을 표시 및 조절할 수 있는 숫자 입력창을 제공합니다.
